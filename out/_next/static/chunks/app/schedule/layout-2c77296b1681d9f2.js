(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{1785:(e,t,s)=>{"use strict";s.d(t,{Header:()=>S});var a=s(5155),r=s(7340),i=s(9376),l=s(1788),n=s(6874),o=s.n(n),d=s(6103),c=s(3925),m=s(3999);async function u(e){let t=c.Wp.book_new(),s=e.employees.map(e=>{let t={ID:e.id,Name:e.name,Email:e.email||"","Max Hours":e.maxHours,Team:e.team||"Default"};return Object.entries(e.skills).forEach(e=>{let[s,a]=e;t[s]=a}),t});if(s.length>0){let e=c.Wp.json_to_sheet(s);c.Wp.book_append_sheet(t,e,"Employees")}let a=e.projects.map(e=>{var t;return{ID:e.id,Name:e.name,"Start Date":(0,m.Yq)(e.startDate),"End Date":(0,m.Yq)(e.endDate),"Required Skills":(null==(t=e.requiredSkills)?void 0:t.join(", "))||"",Portfolio:e.portfolio||""}});if(a.length>0){let e=c.Wp.json_to_sheet(a);c.Wp.book_append_sheet(t,e,"Projects")}let r=new Map,i=new Set;e.assignments.forEach(t=>{let s=e.employees.find(e=>e.id===t.employeeId),a=e.projects.find(e=>e.id===t.projectId);if(s&&a){let e="".concat(s.name,"|").concat(a.name),l=t.date||t.week;i.add(l),r.has(e)||r.set(e,new Map),r.get(e).set(l,t.hours)}});let l=Array.from(i).sort((e,t)=>{let s=new Date(e),a=new Date(t);return isNaN(s.getTime())||isNaN(a.getTime())?e.localeCompare(t):s.getTime()-a.getTime()}),n=[];if(r.forEach((e,t)=>{let[s,a]=t.split("|"),r={Employee:s,Project:a};l.forEach(t=>{r[t]=e.get(t)||0}),n.push(r)}),n.length>0){let e=c.Wp.json_to_sheet(n);c.Wp.book_append_sheet(t,e,"Assignments")}let o=new Blob([c.M9(t,{bookType:"xlsx",type:"array"})],{type:"application/octet-stream"}),d=URL.createObjectURL(o),u=document.createElement("a");u.href=d,u.download="schedule_".concat(new Date().toISOString().split("T")[0],".xlsx"),u.click(),URL.revokeObjectURL(d)}var h=s(2115),g=s(4416),p=s(5339),x=s(5196),f=s(381),j=s(5690),y=s(3935);async function v(e,t,s,a){var r,i;let l=(0,y.tc)(e.employees,e.projects),n=e.assignments.filter(e=>e.employeeId&&("Placeholder"===e.employeeId||"placeholder"===e.employeeId||e.employeeId.startsWith("Placeholder ")));if(0===n.length)return{suggestions:[],totalScore:0,metrics:{currentOvertimeHours:b(e.employees,e.assignments),currentUtilization:(0,y.jz)(e.employees,e.assignments),currentSkillsMatch:(0,y.en)(e.assignments,new Map(e.employees.map(e=>[e.id,e])),new Map(e.projects.map(e=>[e.id,e]))),predictedOvertimeHours:b(e.employees,e.assignments),predictedUtilization:(0,y.jz)(e.employees,e.assignments),predictedSkillsMatch:(0,y.en)(e.assignments,new Map(e.employees.map(e=>[e.id,e])),new Map(e.projects.map(e=>[e.id,e])))}};a&&a(10);let o=[],d=new Map(e.projects.map(e=>[e.id,e])),c=new Map;n.forEach(e=>{let t="".concat(e.projectId,"-").concat(e.week||e.date);c.has(t)||c.set(t,[]),c.get(t).push(e)});let m=0;for(let r of c.values()){let i=r[0],c=d.get(i.projectId);if(!c)continue;let u=new Set;for(let i of r){let r=await w(i,c,e,s,l,t,u);if(r){u.add(r.id);let t=function(e,t,s,a,r){let i=a.assignments.filter(t=>t.employeeId===e.id).reduce((e,t)=>e+t.hours,0)+t.hours,l=i>e.maxHours?-(i-e.maxHours):0,n=Math.min(100,i/e.maxHours*100),o=r.get(e.id);return{overtime:l,utilization:n,skills:100*((null==o?void 0:o.get(s.id))||0)}}(r,i,c,e,l);o.push({projectId:c.id,projectName:c.name,week:i.week,originalHours:i.hours,suggestedEmployeeId:r.id,suggestedEmployeeName:r.name,overtimeScore:t.overtime,utilizationScore:t.utilization,skillsScore:t.skills})}m++,a&&a(10+m/n.length*80)}}let u=function(e,t){let s=[...e].filter(e=>e.employeeId&&"Placeholder"!==e.employeeId&&"placeholder"!==e.employeeId&&!e.employeeId.startsWith("Placeholder "));return t.forEach(e=>{s.push({id:"".concat(e.suggestedEmployeeId,"-").concat(e.projectId,"-").concat(e.week),employeeId:e.suggestedEmployeeId,projectId:e.projectId,week:e.week,hours:e.originalHours})}),s}(e.assignments,o);return a&&a(100),{suggestions:o,totalScore:(r=o,i=s,r.reduce((e,t)=>e+t.overtimeScore*i.overtime+t.utilizationScore*i.utilization+t.skillsScore*i.skills,0)),metrics:{currentOvertimeHours:b(e.employees,e.assignments),currentUtilization:(0,y.jz)(e.employees,e.assignments),currentSkillsMatch:(0,y.en)(e.assignments,new Map(e.employees.map(e=>[e.id,e])),new Map(e.projects.map(e=>[e.id,e]))),predictedOvertimeHours:b(e.employees,u),predictedUtilization:(0,y.jz)(e.employees,u),predictedSkillsMatch:(0,y.en)(u,new Map(e.employees.map(e=>[e.id,e])),new Map(e.projects.map(e=>[e.id,e])))}}}function b(e,t){let s=new Map;t.forEach(e=>{if(e.employeeId&&"Placeholder"!==e.employeeId&&"placeholder"!==e.employeeId&&!e.employeeId.startsWith("Placeholder ")){let t=e.date||e.week;s.has(e.employeeId)||s.set(e.employeeId,new Map);let a=s.get(e.employeeId),r=a.get(t)||0;a.set(t,r+e.hours)}});let a=0;return e.forEach(e=>{let t=s.get(e.id);t&&t.forEach(t=>{t>e.maxHours&&(a+=t-e.maxHours)})}),a}async function w(e,t,s,a,r,i){let l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Set,n=s.employees.filter(e=>"placeholder"!==e.id&&"Placeholder"!==e.id&&!e.id.startsWith("placeholder")&&!l.has(e.id));if(0===n.length)return null;let o=null,d=-1/0;for(let i of n){let l=s.assignments.filter(e=>e.employeeId===i.id).reduce((e,t)=>e+t.hours,0),n=l+e.hours>i.maxHours,c=r.get(i.id),m=(null==c?void 0:c.get(t.id))||0,u=0;n&&(u-=a.overtime*(l+e.hours-i.maxHours));let h=(l+e.hours)/i.maxHours;h<=1&&(u+=a.utilization*h),(u+=a.skills*m)>d&&(d=u,o=i)}return o}var N=s(7291);function k(e){let{onClose:t}=e,[s,r]=(0,h.useState)("genetic"),[l,n]=(0,h.useState)(!1),[o,c]=(0,h.useState)(!1),[m,u]=(0,h.useState)(null),[y,b]=(0,h.useState)(0),[w,k]=(0,h.useState)({overtime:10,utilization:7,skills:7}),M=(0,d.M)(e=>e.employees),S=(0,d.M)(e=>e.projects),D=(0,d.M)(e=>e.assignments),z=(0,d.M)(e=>e.skills),I=(0,d.M)(e=>e.teams),E=(0,h.useMemo)(()=>({employees:M,projects:S,assignments:D,skills:z||[],teams:I||[]}),[M,S,D,z,I]),T=async()=>{n(!0),b(0);let e=w.overtime+w.utilization+w.skills,t={overtime:e>0?w.overtime/e:.33,utilization:e>0?w.utilization/e:.33,skills:e>0?w.skills/e:.34};try{let e=await v(E,s,t,e=>b(e));b(100),u(e),setTimeout(()=>{n(!1),c(!0)},500)}catch(e){n(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.A,{className:"w-6 h-6 text-blue-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Optimize Schedule"})]}),(0,a.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(g.A,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"p-6",children:o&&m?(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Optimization Results"}),0===m.suggestions.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(p.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No placeholder assignments found to optimize."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-600",children:"Overtime Hours"}),(0,a.jsxs)("div",{className:"font-semibold",children:[m.metrics.currentOvertimeHours.toFixed(0)," → ",m.metrics.predictedOvertimeHours.toFixed(0),(0,a.jsxs)("span",{className:"ml-2 text-xs ".concat(m.metrics.predictedOvertimeHours<m.metrics.currentOvertimeHours?"text-green-600":"text-orange-600"),children:["(",m.metrics.predictedOvertimeHours-m.metrics.currentOvertimeHours>0?"+":"",(m.metrics.predictedOvertimeHours-m.metrics.currentOvertimeHours).toFixed(0),")"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-600",children:"Utilization"}),(0,a.jsxs)("div",{className:"font-semibold",children:[m.metrics.currentUtilization.toFixed(1),"% → ",m.metrics.predictedUtilization.toFixed(1),"%",(0,a.jsxs)("span",{className:"ml-2 text-xs ".concat(m.metrics.predictedUtilization>m.metrics.currentUtilization?"text-green-600":"text-orange-600"),children:["(",m.metrics.predictedUtilization>m.metrics.currentUtilization?"+":"",(m.metrics.predictedUtilization-m.metrics.currentUtilization).toFixed(1),"%)"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-600",children:"Skills Match"}),(0,a.jsxs)("div",{className:"font-semibold",children:[m.metrics.currentSkillsMatch.toFixed(0)," → ",m.metrics.predictedSkillsMatch.toFixed(0),(0,a.jsxs)("span",{className:"ml-2 text-xs ".concat(m.metrics.predictedSkillsMatch>m.metrics.currentSkillsMatch?"text-green-600":"text-orange-600"),children:["(",m.metrics.predictedSkillsMatch>m.metrics.currentSkillsMatch?"+":"",(m.metrics.predictedSkillsMatch-m.metrics.currentSkillsMatch).toFixed(0),")"]})]})]})]})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Suggested Assignments"}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(m.suggestions.reduce((e,t)=>{e[t.projectId]||(e[t.projectId]={projectName:t.projectName,employees:new Map}),e[t.projectId].employees.has(t.suggestedEmployeeId)||e[t.projectId].employees.set(t.suggestedEmployeeId,{name:t.suggestedEmployeeName,totalHours:0,weeks:[]});let s=e[t.projectId].employees.get(t.suggestedEmployeeId);return s.totalHours+=t.originalHours,s.weeks.push(t.week),e},{})).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:s.projectName}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.from(s.employees.entries()).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"bg-white px-3 py-2 rounded-md border border-gray-200 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:s.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",s.totalHours,"h)"]})]},t)})})]},t)})})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{if(!m)return;let e=[...E.assignments].filter(e=>!e.employeeId||"Placeholder"!==e.employeeId&&"placeholder"!==e.employeeId&&!e.employeeId.startsWith("Placeholder "));m.suggestions.forEach(t=>{e.push({id:"".concat(t.suggestedEmployeeId,"-").concat(t.projectId,"-").concat(t.week),employeeId:t.suggestedEmployeeId,projectId:t.projectId,week:t.week,hours:t.originalHours})}),d.M.getState().loadData({...E,assignments:e,skills:d.M.getState().skills,teams:d.M.getState().teams}),t()},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(x.A,{className:"w-4 h-4"}),"Apply Changes"]}),(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"Cancel"})]})]})]}):l?(0,a.jsxs)("div",{className:"py-8",children:[(0,a.jsx)("h3",{className:"text-center font-semibold mb-4",children:"Optimizing Schedule..."}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"bg-gray-200 rounded-full h-4 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-blue-600 h-full transition-all duration-300",style:{width:"".concat(y,"%")}})})}),(0,a.jsxs)("p",{className:"text-center text-sm text-gray-600",children:[y<30&&"Analyzing current schedule...",y>=30&&y<60&&"Generating optimization candidates...",y>=60&&y<90&&"Evaluating solutions...",y>=90&&"Finalizing optimal schedule..."]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Optimization Weights"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Minimize Overtime"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[w.overtime,"/10"]})]}),(0,a.jsxs)(N.bL,{value:[w.overtime],onValueChange:e=>{let[t]=e;return k({...w,overtime:t})},max:10,step:1,className:"relative flex items-center select-none touch-none w-full h-5",children:[(0,a.jsx)(N.CC,{className:"bg-gray-200 relative grow rounded-full h-2",children:(0,a.jsx)(N.Q6,{className:"absolute bg-orange-500 rounded-full h-full"})}),(0,a.jsx)(N.zi,{className:"block w-5 h-5 bg-white border-2 border-orange-500 rounded-full hover:bg-orange-50 focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Maximize Utilization"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[w.utilization,"/10"]})]}),(0,a.jsxs)(N.bL,{value:[w.utilization],onValueChange:e=>{let[t]=e;return k({...w,utilization:t})},max:10,step:1,className:"relative flex items-center select-none touch-none w-full h-5",children:[(0,a.jsx)(N.CC,{className:"bg-gray-200 relative grow rounded-full h-2",children:(0,a.jsx)(N.Q6,{className:"absolute bg-blue-500 rounded-full h-full"})}),(0,a.jsx)(N.zi,{className:"block w-5 h-5 bg-white border-2 border-blue-500 rounded-full hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Optimize Skills Matching"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[w.skills,"/10"]})]}),(0,a.jsxs)(N.bL,{value:[w.skills],onValueChange:e=>{let[t]=e;return k({...w,skills:t})},max:10,step:1,className:"relative flex items-center select-none touch-none w-full h-5",children:[(0,a.jsx)(N.CC,{className:"bg-gray-200 relative grow rounded-full h-2",children:(0,a.jsx)(N.Q6,{className:"absolute bg-green-500 rounded-full h-full"})}),(0,a.jsx)(N.zi,{className:"block w-5 h-5 bg-white border-2 border-green-500 rounded-full hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-green-500"})]})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),"Optimization Algorithm"]}),(0,a.jsxs)("select",{value:s,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"genetic",children:"Genetic Algorithm - Best for complex multi-objective optimization"}),(0,a.jsx)("option",{value:"annealing",children:"Simulated Annealing - Good for local optimization and fine-tuning"}),(0,a.jsx)("option",{value:"constraint",children:"Constraint Satisfaction - Fast, rule-based assignment"})]}),(0,a.jsxs)("p",{className:"mt-2 text-xs text-gray-600",children:["genetic"===s&&"Uses evolutionary computation to explore a wide solution space and find globally optimal assignments.","annealing"===s&&"Gradually improves assignments by making small changes, good for refining existing schedules.","constraint"===s&&"Quickly finds valid assignments using hard rules, prioritizing constraint satisfaction over optimization."]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:T,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(j.A,{className:"w-4 h-4"}),"Run Optimization"]}),(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"Cancel"})]})]})})]})})}var M=s(3653);function S(){let[e,t]=(0,h.useState)(!1),s=(0,d.M)(e=>e.employees),n=(0,d.M)(e=>e.projects),c=(0,d.M)(e=>e.assignments),m=(0,d.M)(e=>e.skills),g=(0,d.M)(e=>e.teams),p=(0,h.useMemo)(()=>({employees:s,projects:n,assignments:c,skills:m,teams:g}),[s,n,c,m,g]),x=async()=>{try{await u(p)}catch(e){(0,M.P)("error","Export failed","Unable to export Excel file. Please try again.")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-100 sticky top-0 z-40",children:(0,a.jsx)("div",{className:"container mx-auto px-6 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(o(),{href:"/",className:"btn-icon",title:"Home",children:(0,a.jsx)(r.A,{className:"w-5 h-5"})}),(0,a.jsx)(o(),{href:"/",className:"text-heading hover:text-blue-600 transition-colors",children:"Resource Scheduler"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{onClick:()=>t(!0),className:"btn-secondary flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"w-4 h-4"}),"Optimize Schedule"]}),(0,a.jsxs)("button",{onClick:x,className:"btn-primary flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"w-4 h-4"}),"Download Excel"]})]})]})})}),e&&(0,a.jsx)(k,{onClose:()=>t(!1)})]})}},2383:()=>{},2666:(e,t,s)=>{"use strict";s.d(t,{MetricsBar:()=>u});var a=s(5155),r=s(6103),i=s(3935),l=s(4186),n=s(3109),o=s(6785),d=s(2115),c=s(520),m=s(5695);function u(){let e=(0,r.M)(e=>e.employees),t=(0,r.M)(e=>e.projects),s=(0,r.M)(e=>e.assignments),u=(0,r.M)(e=>e.dateRange),h=(0,r.M)(e=>e.setOvertimeSortTrigger),g=(0,r.M)(e=>e.setUtilizationSortTrigger),p=(0,m.useRouter)(),x=(0,m.usePathname)(),[f,j]=(0,d.useState)({overtimeHours:0,resourceUtilization:0,skillsMatching:0}),y=(0,d.useMemo)(()=>{if(!u)return s;let e=u.start instanceof Date?u.start:new Date(u.start),t=u.end instanceof Date?u.end:new Date(u.end);return s.filter(s=>{let a=s.date?new Date(s.date):s.week?new Date(s.week):null;return!a||(0,c.v)(a,{start:e,end:t})})},[s,u]);return(0,d.useEffect)(()=>{j((0,i.El)(e,t,y))},[e,t,y]),(0,a.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-100",children:(0,a.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{onClick:()=>{x.includes("/schedule")?(window.location.hash="view=hours",setTimeout(()=>h(),100)):(p.push("/schedule#view=hours"),setTimeout(()=>h(),200))},className:"flex items-center gap-3 p-4 bg-gradient-to-br from-orange-50 to-orange-100/50 rounded-xl hover-lift cursor-pointer transition-all duration-200",children:[(0,a.jsx)("div",{className:"p-2.5 bg-white rounded-lg shadow-sm",children:(0,a.jsx)(l.A,{className:"w-5 h-5 text-orange-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-900",children:f.overtimeHours}),(0,a.jsx)("div",{className:"text-sm text-orange-700 font-medium",children:"Overtime Hours"})]})]}),(0,a.jsxs)("div",{onClick:()=>{x.includes("/schedule")?(window.location.hash="view=hours",setTimeout(()=>g(),100)):(p.push("/schedule#view=hours"),setTimeout(()=>g(),200))},className:"flex items-center gap-3 p-4 bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-xl hover-lift cursor-pointer transition-all duration-200",children:[(0,a.jsx)("div",{className:"p-2.5 bg-white rounded-lg shadow-sm",children:(0,a.jsx)(n.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-900",children:[f.resourceUtilization,"%"]}),(0,a.jsx)("div",{className:"text-sm text-blue-700 font-medium",children:"Resource Utilization"})]})]}),(0,a.jsxs)("div",{onClick:()=>{x.includes("/schedule")?window.location.hash="view=skills&subview=project":p.push("/schedule#view=skills&subview=project")},className:"flex items-center gap-3 p-4 bg-gradient-to-br from-green-50 to-green-100/50 rounded-xl hover-lift cursor-pointer transition-all duration-200",children:[(0,a.jsx)("div",{className:"p-2.5 bg-white rounded-lg shadow-sm",children:(0,a.jsx)(o.A,{className:"w-5 h-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-900",children:f.skillsMatching}),(0,a.jsx)("div",{className:"text-sm text-green-700 font-medium",children:"Skills Matching"})]})]})]})})})}},3653:(e,t,s)=>{"use strict";s.d(t,{P:()=>m,ToastContainer:()=>c});var a=s(5155),r=s(2115),i=s(646),l=s(5339),n=s(1284),o=s(4416);function d(e){let{toast:t,onClose:s}=e;(0,r.useEffect)(()=>{let e=setTimeout(()=>{s(t.id)},5e3);return()=>clearTimeout(e)},[t.id,s]);let d={success:(0,a.jsx)(i.A,{className:"w-5 h-5 text-green-600"}),error:(0,a.jsx)(l.A,{className:"w-5 h-5 text-red-600"}),info:(0,a.jsx)(n.A,{className:"w-5 h-5 text-blue-600"})};return(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 rounded-lg border shadow-lg animate-slide-up ".concat({success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",info:"bg-blue-50 border-blue-200"}[t.type]),children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:d[t.type]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:t.title}),t.message&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:t.message})]}),(0,a.jsx)("button",{onClick:()=>s(t.id),className:"flex-shrink-0 p-1 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(o.A,{className:"w-4 h-4 text-gray-500"})})]})}function c(){let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=e=>{let s={...e.detail,id:Date.now().toString()};t(e=>[...e,s])};return window.addEventListener("show-toast",e),()=>window.removeEventListener("show-toast",e)},[]);let s=e=>{t(t=>t.filter(t=>t.id!==e))};return 0===e.length?null:(0,a.jsx)("div",{className:"fixed bottom-4 right-4 z-50 space-y-2 max-w-md",children:e.map(e=>(0,a.jsx)(d,{toast:e,onClose:s},e.id))})}function m(e,t,s){let a=new CustomEvent("show-toast",{detail:{type:e,title:t,message:s}});window.dispatchEvent(a)}},3686:()=>{},3935:(e,t,s)=>{"use strict";s.d(t,{El:()=>i,en:()=>l,jz:()=>r,tc:()=>n});let a={Beginner:1,Intermediate:2,Expert:3};function r(e,t){if(!e.length)return 0;let s=new Set,a=new Map;for(let e of t){let t=e.date||e.week;s.add(t),a.set(e.employeeId,(a.get(e.employeeId)||0)+e.hours)}let r=Math.max(1,s.size),i=0,l=0;for(let t of e)i+=t.maxHours*r,l+=a.get(t.id)||0;return i>0?Math.round(l/i*100):0}function i(e,t,s){let a=0,i=new Map,n=new Map;e.forEach(e=>i.set(e.id,e)),t.forEach(e=>n.set(e.id,e));let o=new Map;s.forEach(e=>{let t=e.date||e.week;o.has(e.employeeId)||o.set(e.employeeId,new Map);let s=o.get(e.employeeId),a=s.get(t)||0;s.set(t,a+e.hours)}),e.forEach(e=>{let t=o.get(e.id);t&&t.forEach(t=>{t>e.maxHours&&(a+=t-e.maxHours)})});let d=r(e,s),c=l(s,i,n);return{overtimeHours:Math.round(a),resourceUtilization:d,skillsMatching:Math.round(c)}}function l(e,t,s){let r=0,i=new Set;for(let l of e){let e="".concat(l.employeeId,"-").concat(l.projectId);if(i.has(e))continue;let n=t.get(l.employeeId),o=s.get(l.projectId);if(n&&o&&o.requiredSkills&&0!==o.requiredSkills.length)for(let t of(i.add(e),o.requiredSkills)){let e=n.skills[t];e&&(r+=a[e])}}return r}function n(e,t){let s=new Map;for(let r of e){let e=new Map;for(let s of t){let t=function(e,t){if(!t.requiredSkills)return 0;let s=0;for(let r of t.requiredSkills){let t=e.skills[r];t&&(s+=a[t])}return s}(r,s);t>0&&e.set(s.id,t)}e.size>0&&s.set(r.id,e)}return s}},3999:(e,t,s)=>{"use strict";s.d(t,{$C:()=>l,Yq:()=>n,_U:()=>o,cn:()=>i});var a=s(2596),r=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}function l(){return"id_".concat(Math.random().toString(36).substr(2,9))}function n(e){return e?new Date(e).toISOString().split("T")[0]:""}function o(e){return e?e instanceof Date?e:new Date("number"==typeof e?(e-25569)*864e5:e):null}},5666:(e,t,s)=>{"use strict";s.d(t,{Navigation:()=>f});var a=s(5155),r=s(5695),i=s(9074),l=s(4186),n=s(1007),o=s(3999),d=s(2115),c=s(7386),m=s(3163),u=s(4505),h=s(8737),g=s(6103);function p(){let e=(0,g.M)(e=>e.dateRange),t=(0,g.M)(e=>e.setDateRange),s=(0,g.M)(e=>e.projects),r=e=>{if(e instanceof Date)return e;let t=String(e);if(t.match(/^\d{4}-\d{2}-\d{2}$/)){let[e,s,a]=t.split("-").map(Number);return new Date(e,s-1,a)}return new Date(e)},l=()=>{if(0===s.length){let e=new Date;return{start:(0,c.D)(e),end:(0,m.Q)(e)}}let e=r(s[0].startDate),t=r(s[0].endDate);return s.forEach(s=>{let a=r(s.startDate),i=r(s.endDate);a<e&&(e=a),i>t&&(t=i)}),{start:e,end:t}},n=l(),[o,p]=(()=>{if(0===s.length){let e=new Date;return[(0,c.D)((0,u.e)(e,-2)),(0,m.Q)((0,u.e)(e,2))]}let e=l();return[(0,c.D)((0,u.e)(e.start,-1)),(0,m.Q)((0,u.e)(e.end,1))]})(),[x,f]=(0,d.useState)(""),[j,y]=(0,d.useState)("");return(0,d.useEffect)(()=>{!e&&s.length>0&&t({start:n.start,end:n.end})},[s.length]),(0,d.useEffect)(()=>{if(e){let t=e.start instanceof Date?e.start:new Date(e.start),s=e.end instanceof Date?e.end:new Date(e.end);f((0,h.GP)(t,"yyyy-MM-dd")),y((0,h.GP)(s,"yyyy-MM-dd"))}else s.length>0&&(f((0,h.GP)(n.start,"yyyy-MM-dd")),y((0,h.GP)(n.end,"yyyy-MM-dd")))},[e,n.start,n.end,s.length]),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("label",{htmlFor:"start-date",className:"text-sm font-medium text-gray-700",children:"From:"}),(0,a.jsx)("input",{id:"start-date",type:"date",value:x,onChange:e=>{let s=e.target.value;if(f(s),s&&j){let[e,a,r]=s.split("-").map(Number),[i,l,n]=j.split("-").map(Number);t({start:new Date(e,a-1,r),end:new Date(i,l-1,n)})}},min:(0,h.GP)(o,"yyyy-MM-dd"),max:j||(0,h.GP)(p,"yyyy-MM-dd"),className:"input-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"end-date",className:"text-sm font-medium text-gray-700",children:"To:"}),(0,a.jsx)("input",{id:"end-date",type:"date",value:j,onChange:e=>{let s=e.target.value;if(y(s),x&&s){let[e,a,r]=x.split("-").map(Number),[i,l,n]=s.split("-").map(Number);t({start:new Date(e,a-1,r),end:new Date(i,l-1,n)})}},min:x||(0,h.GP)(o,"yyyy-MM-dd"),max:(0,h.GP)(p,"yyyy-MM-dd"),className:"input-sm"})]})]})}let x=[{id:"gantt",label:"Gantt Chart",icon:i.A},{id:"hours",label:"Hours",icon:l.A},{id:"skills",label:"Skills",icon:n.A}];function f(){let e=(0,r.usePathname)(),[t,s]=(0,d.useState)("gantt"),i=(0,g.M)(e=>e.selectedTeam),l=(0,g.M)(e=>e.setSelectedTeam),n=(0,g.M)(e=>e.teams);return((0,d.useEffect)(()=>{let e=()=>{s(new URLSearchParams(window.location.hash.slice(1)).get("view")||"gantt")};return e(),window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]),e.includes("/schedule"))?(0,a.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-100",children:(0,a.jsx)("div",{className:"container mx-auto px-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("nav",{className:"flex",children:x.map(e=>{let s=e.icon,r=t===e.id;return(0,a.jsxs)("button",{onClick:()=>{var t;return t=e.id,void(window.location.hash="view=".concat(t))},className:(0,o.cn)("flex items-center gap-2 px-6 py-4 font-medium transition-all duration-200 border-b-2",r?"text-blue-600 border-blue-600 bg-blue-50/50":"text-gray-600 border-transparent hover:text-gray-900 hover:bg-gray-50"),children:[(0,a.jsx)(s,{className:"w-4 h-4"}),e.label]},e.id)})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(p,{}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"team-select",className:"text-caption font-medium",children:"Team:"}),(0,a.jsx)("select",{id:"team-select",value:i,onChange:e=>l(e.target.value),className:"select-base text-sm min-w-[120px]",children:n.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]})]})})}):null}},6103:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var a=s(5453),r=s(6786);let i={employees:[],projects:[],assignments:[],skills:[],teams:["All Teams"]},l=(0,a.v)()((0,r.Zr)(e=>({...i,selectedTeam:"All Teams",dateRange:null,hasHydrated:!1,overtimeSortTrigger:0,utilizationSortTrigger:0,loadData:t=>e(()=>({...t,teams:["All Teams",...Array.from(new Set(t.employees.map(e=>e.team).filter(e=>!!e)))],dateRange:null})),setSelectedTeam:t=>e({selectedTeam:t}),setDateRange:t=>e({dateRange:t}),updateEmployee:(t,s)=>e(e=>({employees:e.employees.map(e=>e.id===t?{...e,...s}:e)})),updateProject:(t,s)=>e(e=>{let a=e.projects.find(e=>e.id===t);if(!a)return{projects:e.projects.map(e=>e.id===t?{...e,...s}:e)};if(s.startDate&&s.startDate!==a.startDate||s.endDate&&s.endDate!==a.endDate){let r=new Date(a.startDate),i=s.startDate?new Date(s.startDate):r,l=new Date(s.endDate?s.endDate:a.endDate),n=s.startDate?Math.round((i.getTime()-r.getTime())/6048e5):0,o=e.assignments.map(e=>{if(e.projectId===t||e.projectId===a.name){let t=null,s={...e};if(0!==n)if(e.date){let a=new Date((t=new Date(e.date)).getTime()+6048e5*n),r=a.toISOString().split("T")[0],i=a.toLocaleDateString("en-US",{month:"short",day:"numeric"}).toUpperCase();s={...s,date:r,week:i},t=a}else{let r=new Date().getFullYear(),i=e.week.split(" ");if(2===i.length){let e={JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11}[i[0]],l=parseInt(i[1]);if(!isNaN(e)&&!isNaN(l)){let i=new Date(r,e,l),o=new Date(a.startDate).getFullYear();Math.abs(r-o)>1&&i.setFullYear(o);let d=new Date(i.getTime()+6048e5*n),c=d.toISOString().split("T")[0],m=d.toLocaleDateString("en-US",{month:"short",day:"numeric"}).toUpperCase();s={...s,date:c,week:m},t=d}}}else s.date&&(t=new Date(s.date));if(t){let e=new Date(t.getTime()+5184e5);(t>l||e<i)&&(s={...s,hours:0})}return s}return e});return{projects:e.projects.map(e=>e.id===t?{...e,...s}:e),assignments:o}}return{projects:e.projects.map(e=>e.id===t?{...e,...s}:e)}}),addProject:t=>e(e=>{let s="project_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),a={...t,id:s};return{projects:[...e.projects,a]}}),updateAssignment:(t,s)=>e(e=>({assignments:e.assignments.map(e=>e.id===t?{...e,...s}:e)})),addAssignment:t=>e(e=>({assignments:[...e.assignments,t]})),removeAssignment:t=>e(e=>({assignments:e.assignments.filter(e=>e.id!==t)})),clearData:()=>e(i),setHasHydrated:t=>e({hasHydrated:t}),setOvertimeSortTrigger:()=>e(e=>({overtimeSortTrigger:e.overtimeSortTrigger+1,utilizationSortTrigger:0})),setUtilizationSortTrigger:()=>e(e=>({utilizationSortTrigger:e.utilizationSortTrigger+1,overtimeSortTrigger:0}))}),{name:"schedule-storage",storage:(0,r.KU)(()=>localStorage),partialize:e=>({employees:e.employees,projects:e.projects,assignments:e.assignments,skills:e.skills,teams:e.teams,selectedTeam:e.selectedTeam,dateRange:e.dateRange}),onRehydrateStorage:()=>e=>{let t=e=>{if(e instanceof Date)return e;let t=String(e);if(t.match(/^\d{4}-\d{2}-\d{2}$/)){let[e,s,a]=t.split("-").map(Number);return new Date(e,s-1,a)}return new Date(e)};(null==e?void 0:e.dateRange)&&(e.dateRange={start:t(e.dateRange.start),end:t(e.dateRange.end)}),(null==e?void 0:e.projects)&&(e.projects=e.projects.map(e=>({...e,startDate:t(e.startDate),endDate:t(e.endDate)}))),null==e||e.setHasHydrated(!0)}}))},6328:(e,t,s)=>{Promise.resolve().then(s.bind(s,1785)),Promise.resolve().then(s.bind(s,2666)),Promise.resolve().then(s.bind(s,5666))}},e=>{e.O(0,[121,358],()=>e(e.s=6328)),_N_E=e.O()}]);