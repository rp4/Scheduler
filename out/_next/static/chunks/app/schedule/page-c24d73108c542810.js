(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{1569:(e,t,a)=>{Promise.resolve().then(a.bind(a,7139))},3999:(e,t,a)=>{"use strict";a.d(t,{$C:()=>n,Yq:()=>d,_U:()=>o,cn:()=>l});var r=a(2596),s=a(9688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}function n(){return"id_".concat(Math.random().toString(36).substr(2,9))}function d(e){return e?new Date(e).toISOString().split("T")[0]:""}function o(e){return e?e instanceof Date?e:new Date("number"==typeof e?(e-25569)*864e5:e):null}},6103:(e,t,a)=>{"use strict";a.d(t,{M:()=>n});var r=a(5453),s=a(6786);let l={employees:[],projects:[],assignments:[],skills:[],teams:["All Teams"]},n=(0,r.v)()((0,s.Zr)(e=>({...l,selectedTeam:"All Teams",dateRange:null,hasHydrated:!1,overtimeSortTrigger:0,utilizationSortTrigger:0,loadData:t=>e(()=>({...t,teams:["All Teams",...Array.from(new Set(t.employees.map(e=>e.team).filter(e=>!!e)))],dateRange:null})),setSelectedTeam:t=>e({selectedTeam:t}),setDateRange:t=>e({dateRange:t}),updateEmployee:(t,a)=>e(e=>({employees:e.employees.map(e=>e.id===t?{...e,...a}:e)})),updateProject:(t,a)=>e(e=>{let r=e.projects.find(e=>e.id===t);if(!r)return{projects:e.projects.map(e=>e.id===t?{...e,...a}:e)};if(a.startDate&&a.startDate!==r.startDate||a.endDate&&a.endDate!==r.endDate){let s=new Date(r.startDate),l=a.startDate?new Date(a.startDate):s,n=new Date(a.endDate?a.endDate:r.endDate),d=a.startDate?Math.round((l.getTime()-s.getTime())/6048e5):0,o=e.assignments.map(e=>{if(e.projectId===t||e.projectId===r.name){let t=null,a={...e};if(0!==d)if(e.date){let r=new Date((t=new Date(e.date)).getTime()+6048e5*d),s=r.toISOString().split("T")[0],l=r.toLocaleDateString("en-US",{month:"short",day:"numeric"}).toUpperCase();a={...a,date:s,week:l},t=r}else{let s=new Date().getFullYear(),l=e.week.split(" ");if(2===l.length){let e={JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11}[l[0]],n=parseInt(l[1]);if(!isNaN(e)&&!isNaN(n)){let l=new Date(s,e,n),o=new Date(r.startDate).getFullYear();Math.abs(s-o)>1&&l.setFullYear(o);let i=new Date(l.getTime()+6048e5*d),c=i.toISOString().split("T")[0],m=i.toLocaleDateString("en-US",{month:"short",day:"numeric"}).toUpperCase();a={...a,date:c,week:m},t=i}}}else a.date&&(t=new Date(a.date));if(t){let e=new Date(t.getTime()+5184e5);(t>n||e<l)&&(a={...a,hours:0})}return a}return e});return{projects:e.projects.map(e=>e.id===t?{...e,...a}:e),assignments:o}}return{projects:e.projects.map(e=>e.id===t?{...e,...a}:e)}}),addProject:t=>e(e=>{let a="project_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),r={...t,id:a};return{projects:[...e.projects,r]}}),updateAssignment:(t,a)=>e(e=>({assignments:e.assignments.map(e=>e.id===t?{...e,...a}:e)})),addAssignment:t=>e(e=>({assignments:[...e.assignments,t]})),removeAssignment:t=>e(e=>({assignments:e.assignments.filter(e=>e.id!==t)})),clearData:()=>e(l),setHasHydrated:t=>e({hasHydrated:t}),setOvertimeSortTrigger:()=>e(e=>({overtimeSortTrigger:e.overtimeSortTrigger+1,utilizationSortTrigger:0})),setUtilizationSortTrigger:()=>e(e=>({utilizationSortTrigger:e.utilizationSortTrigger+1,overtimeSortTrigger:0}))}),{name:"schedule-storage",storage:(0,s.KU)(()=>localStorage),partialize:e=>({employees:e.employees,projects:e.projects,assignments:e.assignments,skills:e.skills,teams:e.teams,selectedTeam:e.selectedTeam,dateRange:e.dateRange}),onRehydrateStorage:()=>e=>{let t=e=>{if(e instanceof Date)return e;let t=String(e);if(t.match(/^\d{4}-\d{2}-\d{2}$/)){let[e,a,r]=t.split("-").map(Number);return new Date(e,a-1,r)}return new Date(e)};(null==e?void 0:e.dateRange)&&(e.dateRange={start:t(e.dateRange.start),end:t(e.dateRange.end)}),(null==e?void 0:e.projects)&&(e.projects=e.projects.map(e=>({...e,startDate:t(e.startDate),endDate:t(e.endDate)}))),null==e||e.setHasHydrated(!0)}}))},7139:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>W});var r=a(5155),s=a(2115),l=a(9137),n=a.n(l),d=a(6103),o=a(9762),i=a(4036),c=a(4416),m=a(8737);function u(e){let{project:t,open:a,onOpenChange:l,onUpdateProject:n}=e,o=(0,d.M)(e=>e.employees),[u,x]=(0,s.useState)(""),[p,g]=(0,s.useState)(""),[h,f]=(0,s.useState)(""),[b,y]=(0,s.useState)(new Set),[j,w]=(0,s.useState)({}),N=(0,s.useMemo)(()=>{let e=new Set;return o.forEach(t=>{Object.keys(t.skills||{}).forEach(t=>{e.add(t)})}),Array.from(e).sort()},[o]);return((0,s.useEffect)(()=>{t&&(x(t.name),g((0,m.GP)(new Date(t.startDate),"yyyy-MM-dd")),f((0,m.GP)(new Date(t.endDate),"yyyy-MM-dd")),y(new Set(t.requiredSkills||[])),w({}))},[t]),t)?(0,r.jsx)(i.bL,{open:a,onOpenChange:l,children:(0,r.jsxs)(i.ZL,{children:[(0,r.jsx)(i.hJ,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),(0,r.jsxs)(i.UC,{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)(i.hE,{className:"text-lg font-semibold",children:"Edit Project"}),(0,r.jsx)(i.bm,{asChild:!0,children:(0,r.jsx)("button",{className:"p-1 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close",children:(0,r.jsx)(c.A,{className:"w-5 h-5"})})})]}),(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!t)return;let a={};if(u.trim()||(a.name="Project name is required"),p||(a.startDate="Start date is required"),h||(a.endDate="End date is required"),p&&h&&new Date(p)>new Date(h)&&(a.endDate="End date must be after start date"),Object.keys(a).length>0)return void w(a);n(t.id,{name:u.trim(),startDate:new Date(p),endDate:new Date(h),requiredSkills:Array.from(b)}),l(!1)},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"project-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),(0,r.jsx)("input",{id:"project-name",type:"text",value:u,onChange:e=>{x(e.target.value),j.name&&w({...j,name:""})},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(j.name?"border-red-500":"border-gray-300"),placeholder:"Enter project name"}),j.name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,r.jsx)("input",{id:"start-date",type:"date",value:p,onChange:e=>{g(e.target.value),j.startDate&&w({...j,startDate:""})},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(j.startDate?"border-red-500":"border-gray-300")}),j.startDate&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.startDate})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,r.jsx)("input",{id:"end-date",type:"date",value:h,onChange:e=>{f(e.target.value),j.endDate&&w({...j,endDate:""})},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(j.endDate?"border-red-500":"border-gray-300")}),j.endDate&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.endDate})]}),N.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Required Skills"}),(0,r.jsx)("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-3 space-y-2",children:N.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[(0,r.jsx)("input",{type:"checkbox",checked:b.has(e),onChange:()=>(e=>{let t=new Set(b);t.has(e)?t.delete(e):t.add(e),y(t)})(e),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{w({}),y(new Set),l(!1)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})]})]})}):null}var x=a(4616);function p(e){let{onAddProject:t}=e,a=(0,d.M)(e=>e.employees),[l,n]=(0,s.useState)(!1),[o,m]=(0,s.useState)(""),[u,p]=(0,s.useState)(""),[g,h]=(0,s.useState)(""),[f,b]=(0,s.useState)(new Set),[y,j]=(0,s.useState)({}),w=(0,s.useMemo)(()=>{let e=new Set;return a.forEach(t=>{Object.keys(t.skills||{}).forEach(t=>{e.add(t)})}),Array.from(e).sort()},[a]);return(0,r.jsxs)(i.bL,{open:l,onOpenChange:n,children:[(0,r.jsx)(i.l9,{asChild:!0,children:(0,r.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(x.A,{className:"w-4 h-4"}),"Add Project"]})}),(0,r.jsxs)(i.ZL,{children:[(0,r.jsx)(i.hJ,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),(0,r.jsxs)(i.UC,{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)(i.hE,{className:"text-lg font-semibold",children:"Add New Project"}),(0,r.jsx)(i.bm,{asChild:!0,children:(0,r.jsx)("button",{className:"p-1 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close",children:(0,r.jsx)(c.A,{className:"w-5 h-5"})})})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a={};if(o.trim()||(a.name="Project name is required"),u||(a.startDate="Start date is required"),g||(a.endDate="End date is required"),u&&g&&new Date(u)>new Date(g)&&(a.endDate="End date must be after start date"),Object.keys(a).length>0)return void j(a);t({name:o.trim(),startDate:new Date(u),endDate:new Date(g),requiredSkills:Array.from(f)}),m(""),p(""),h(""),b(new Set),j({}),n(!1)},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"project-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),(0,r.jsx)("input",{id:"project-name",type:"text",value:o,onChange:e=>{m(e.target.value),y.name&&j({...y,name:""})},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(y.name?"border-red-500":"border-gray-300"),placeholder:"Enter project name"}),y.name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,r.jsx)("input",{id:"start-date",type:"date",value:u,onChange:e=>{p(e.target.value),y.startDate&&j({...y,startDate:""})},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(y.startDate?"border-red-500":"border-gray-300")}),y.startDate&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.startDate})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,r.jsx)("input",{id:"end-date",type:"date",value:g,onChange:e=>{h(e.target.value),y.endDate&&j({...y,endDate:""})},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(y.endDate?"border-red-500":"border-gray-300")}),y.endDate&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.endDate})]}),w.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Required Skills"}),(0,r.jsx)("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-3 space-y-2",children:w.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[(0,r.jsx)("input",{type:"checkbox",checked:f.has(e),onChange:()=>(e=>{let t=new Set(f);t.has(e)?t.delete(e):t.add(e),b(t)})(e),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{m(""),p(""),h(""),b(new Set),j({}),n(!1)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Project"})]})]})]})]})]})}var g=a(9074),h=a(4481),f=a(6262);function b(){let e=(0,d.M)(e=>e.projects),t=(0,d.M)(e=>e.assignments),a=(0,d.M)(e=>e.employees),l=(0,d.M)(e=>e.selectedTeam),i=(0,d.M)(e=>e.dateRange),c=(0,d.M)(e=>e.updateProject),m=(0,d.M)(e=>e.addProject),[x,b]=(0,s.useState)("week"),[y,j]=(0,s.useState)(null),[w,N]=(0,s.useState)(!1),v=(0,s.useRef)(null),D=(0,s.useMemo)(()=>new Date,[]),k=(0,s.useMemo)(()=>{if(!i)return"week"===x?60:"month"===x?120:200;let e=i.start instanceof Date?i.start:new Date(i.start),t=Math.ceil(((i.end instanceof Date?i.end:new Date(i.end)).getTime()-e.getTime())/864e5);return"week"===x?t<60?100:t<180?80:60:"month"!==x?200:t<365?150:120},[x,i]),S=(0,s.useMemo)(()=>{let r=e;if("All Teams"!==l){let s=new Set(a.filter(e=>e.team===l).map(e=>e.id)),n=new Set;t.forEach(t=>{let r=a.find(e=>e.id===t.employeeId||e.name===t.employeeId);if(r&&s.has(r.id)){n.add(t.projectId);let a=e.find(e=>e.id===t.projectId||e.name===t.projectId);a&&n.add(a.id)}}),r=r.filter(e=>n.has(e.id)||n.has(e.name))}if(i){let e=i.start instanceof Date?i.start:new Date(i.start),t=i.end instanceof Date?i.end:new Date(i.end);r=r.filter(a=>{let r=new Date(a.startDate);return!(new Date(a.endDate)<e||r>t)})}return r},[e,t,a,l,i]),I=(0,s.useMemo)(()=>{if(0===S.length)return[];let e=S.map(e=>({start:new Date(e.startDate),end:new Date(e.endDate),name:e.name,id:e.id,type:"task",progress:0,isDisabled:!1,styles:{backgroundColor:"#3b82f6",backgroundSelectedColor:"#3b82f6",progressColor:"transparent",progressSelectedColor:"transparent"}}));if(i){let t=i.start instanceof Date?i.start:new Date(i.start),a=i.end instanceof Date?i.end:new Date(i.end);return[{start:t,end:t,name:"",id:"__boundary_start__",type:"task",progress:0,isDisabled:!0,styles:{backgroundColor:"transparent",backgroundSelectedColor:"transparent",progressColor:"transparent",progressSelectedColor:"transparent"}},{start:a,end:a,name:"",id:"__boundary_end__",type:"task",progress:0,isDisabled:!0,styles:{backgroundColor:"transparent",backgroundSelectedColor:"transparent",progressColor:"transparent",progressSelectedColor:"transparent"}},...e]}return e},[S,i]);return((0,s.useEffect)(()=>{v.current&&I.length>0&&setTimeout(()=>{let e=document.querySelector(".gantt-container");e&&e.querySelector('[style*="overflow"]')},200)},[I.length]),(0,s.useEffect)(()=>{if("week"===x&&v.current){let e=new MutationObserver(()=>{document.querySelectorAll(".gantt-container text").forEach(e=>{let t=e.textContent||"";if(/^W\d{1,2}$/.test(t)){let a=parseInt(t.substring(1)),r=new Date(new Date().getFullYear(),0,1),s=new Date(r);s.setDate(r.getDate()+(a-1)*7);let l=s.getDay();s.setDate(s.getDate()+(0===l?-6:1-l));let n=s.getDate();e.textContent="".concat(n).concat(1===n||21===n||31===n?"st":2===n||22===n?"nd":3===n||23===n?"rd":"th")}})});return e.observe(v.current,{childList:!0,subtree:!0,characterData:!0}),()=>e.disconnect()}},[x,I]),0===I.length)?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:(0,r.jsx)(g.A,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-subheading mb-2",children:"No Projects Yet"}),(0,r.jsx)("p",{className:"text-caption mb-6 max-w-md mx-auto",children:"Upload an Excel file or load sample data to start visualizing your project timeline."}),(0,r.jsx)("button",{className:"btn-primary",children:"Get Started"})]}):(0,r.jsxs)("div",{className:"jsx-af22f30b870c5c39",children:[(0,r.jsxs)("div",{className:"jsx-af22f30b870c5c39 flex justify-between items-center mb-6",children:[(0,r.jsx)("div",{className:"jsx-af22f30b870c5c39 flex gap-3",children:(0,r.jsx)(p,{onAddProject:m})}),(0,r.jsx)("div",{className:"jsx-af22f30b870c5c39 flex gap-3",children:(0,r.jsxs)("div",{className:"jsx-af22f30b870c5c39 flex items-center bg-gray-50 rounded-lg p-1",children:[(0,r.jsx)("button",{onClick:()=>{let e=["week","month","year"],t=e.indexOf(x);t>0&&b(e[t-1])},disabled:"week"===x,title:"Zoom In",className:"jsx-af22f30b870c5c39 btn-icon disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)(h.A,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>{let e=["week","month","year"],t=e.indexOf(x);t<e.length-1&&b(e[t+1])},disabled:"year"===x,title:"Zoom Out",className:"jsx-af22f30b870c5c39 btn-icon disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)(f.A,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{className:"jsx-af22f30b870c5c39 flex items-center gap-1 px-3 py-2",children:[(0,r.jsx)(g.A,{className:"w-4 h-4 text-gray-500"}),(0,r.jsx)("span",{className:"jsx-af22f30b870c5c39 text-sm font-medium capitalize text-gray-700",children:x})]})]})})]}),(0,r.jsx)("div",{ref:v,className:"jsx-af22f30b870c5c39 gantt-container",children:(0,r.jsx)(o.N,{tasks:I,viewMode:(()=>{switch(x){case"week":default:return o.n.Week;case"month":return o.n.Month;case"year":return o.n.Year}})(),viewDate:D,onDateChange:e=>{e.id.startsWith("__boundary_")||c(e.id,{startDate:e.start,endDate:e.end})},onProgressChange:()=>{},onDoubleClick:e=>{if(e.id.startsWith("__boundary_"))return;let t=S.find(t=>t.id===e.id);t&&(j(t),N(!0))},onClick:()=>{},listCellWidth:"",columnWidth:k,ganttHeight:Math.max(400,45*I.length+100),fontSize:"12px",rowHeight:40,barCornerRadius:4,todayColor:"rgba(239, 68, 68, 0.5)",handleWidth:8,timeStep:864e5,locale:"en-GB"})}),(0,r.jsx)(n(),{id:"af22f30b870c5c39",children:'.gantt-container{font-family:inherit}.gantt-container ._lnNfm{display:none!important}.gantt-container ._1sNtG{display:none!important}.gantt-container ._3ZbQT{width:100%!important;grid-template-columns:0 0 1fr!important}.gantt-container .gantt{border-radius:.5rem;overflow:hidden}.gantt-container ._3F-uD{background:#f9fafb;border-color:#e5e7eb}.gantt-container ._1jRuC{background:white;border-color:#e5e7eb}.gantt-container ._2Odod{color:#374151;font-weight:500}.gantt-container ._34SS0{color:#6b7280}.gantt-container ._nI1Xw{stroke:#e5e7eb}.gantt-container ._2pYPm{stroke:#ef4444;stroke-width:2}.gantt-container rect.barBackground{fill:#3b82f6!important;rx:4}.gantt-container rect.barBackgroundSelected{fill:#3b82f6!important}.gantt-container rect.barProgress{display:none!important}.gantt-container text.barLabel{fill:white!important;font-weight:500}.gantt-container rect.barHandle{fill:#1d4ed8;opacity:0;cursor:ew-resize}.gantt-container g.barWrapper:hover rect.barHandle{opacity:.5}.gantt-container g.barWrapper{cursor:move}.gantt-container div[class*="task-list"]{display:none!important}.gantt-container>div>div{width:100%!important}'}),(0,r.jsx)(u,{project:y,open:w,onOpenChange:N,onUpdateProject:(e,t)=>{c(e,t),j(null),N(!1)}})]})}a(9235);var y=a(6474),j=a(3052),w=a(2138),N=a(7580),v=a(4423),D=a(2794),k=a(7386),S=a(3163),I=a(5118),M=a(1588),C=a(5551),E=a(3999),P=a(7576);function A(e){let{viewMode:t,onViewModeChange:a}=e;return(0,r.jsxs)("div",{className:"flex bg-gray-50 rounded-lg p-1",children:[(0,r.jsxs)("button",{onClick:()=>a("employee"),className:"flex items-center gap-2 px-4 py-2 rounded-md font-medium transition-all duration-200 ".concat("employee"===t?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,r.jsx)(N.A,{className:"w-4 h-4"}),"By Employee"]}),(0,r.jsxs)("button",{onClick:()=>a("project"),className:"flex items-center gap-2 px-4 py-2 rounded-md font-medium transition-all duration-200 ".concat("project"===t?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,r.jsx)(P.A,{className:"w-4 h-4"}),"By Project"]})]})}function T(){let[e,t]=(0,s.useState)("employee"),[a,l]=(0,s.useState)(new Set),[n,o]=(0,s.useState)(null),[i,c]=(0,s.useState)("none"),u=(0,s.useRef)(null),p=(0,s.useRef)(!1),g=(0,d.M)(e=>e.employees),h=(0,d.M)(e=>e.projects),f=(0,d.M)(e=>e.assignments),b=(0,d.M)(e=>e.selectedTeam),P=(0,d.M)(e=>e.dateRange),T=(0,d.M)(e=>e.overtimeSortTrigger),_=(0,d.M)(e=>e.utilizationSortTrigger),O=(0,d.M)(e=>e.updateAssignment),R=(0,d.M)(e=>e.addAssignment),H=(0,d.M)(e=>e.removeAssignment),G=e=>(0,m.GP)(e,"MMM d").toUpperCase(),L=e=>{let t=(0,v.k)(e,{weekStartsOn:1});return(0,m.GP)(t,"yyyy-MM-dd")},W=(0,s.useMemo)(()=>{let e,t;if(console.log("\uD83D\uDCC5 Week generation starting..."),console.log("  dateRangeFilter exists?",!!P),console.log("  projects.length:",h.length),P){console.log("  Using dateRangeFilter:",P.start,"-",P.end);let a=e=>{if(e instanceof Date){let t=e.getHours();if(19===t||18===t){let a=new Date(e);return a.setHours(a.getHours()+(24-t)),a}return e}let t=String(e);if(t.match(/^\d{4}-\d{2}-\d{2}$/)){let[e,a,r]=t.split("-").map(Number);return new Date(e,a-1,r)}return new Date(e)},r=a(P.start),s=a(P.end);e=1===r.getDay()?r:(0,v.k)(r,{weekStartsOn:1}),t=(0,D.$)(s,{weekStartsOn:1})}else if(h.length>0){console.log("  Using project dates to determine range");let a=e=>{if(e instanceof Date)return e;let t=String(e);if(t.match(/^\d{4}-\d{2}-\d{2}$/)){let[e,a,r]=t.split("-").map(Number);return new Date(e,a-1,r)}return new Date(e)};console.log("  First project:",h[0].name),console.log("    Raw startDate:",h[0].startDate,"(type: ".concat(typeof h[0].startDate,")")),console.log("    Raw endDate:",h[0].endDate,"(type: ".concat(typeof h[0].endDate,")"));let r=a(h[0].startDate),s=a(h[0].endDate);console.log("    Parsed start:",(0,m.GP)(r,"yyyy-MM-dd EEEE")),console.log("    Parsed end:",(0,m.GP)(s,"yyyy-MM-dd EEEE")),h.forEach(e=>{let t=a(e.startDate),l=a(e.endDate);t<r&&(r=t),l>s&&(s=l)}),e=1===r.getDay()?r:(0,v.k)(r,{weekStartsOn:1}),t=(0,D.$)(s,{weekStartsOn:1})}else{let a=new Date;e=(0,k.D)(a),t=(0,S.Q)(a)}let a=[],r=(0,v.k)(e,{weekStartsOn:1});for(console.log("  Final range:",(0,m.GP)(e,"yyyy-MM-dd"),"to",(0,m.GP)(t,"yyyy-MM-dd")),console.log("  Starting week generation from:",(0,m.GP)(r,"yyyy-MM-dd"));r<=t;)a.push(r),r=(0,I.J)(r,1);return console.log("  Generated",a.length,"weeks"),a.length>0&&console.log("  First 3 weeks:",a.slice(0,3).map(e=>(0,m.GP)(e,"yyyy-MM-dd")).join(", ")),a},[P,h]),U=(0,s.useMemo)(()=>{let e=new Date,t=(0,v.k)(e,{weekStartsOn:1});return W.findIndex(e=>(0,m.GP)(e,"yyyy-MM-dd")===(0,m.GP)(t,"yyyy-MM-dd"))},[W]);(0,s.useEffect)(()=>{if(U>=0&&u.current&&!p.current&&g.length>0){let e=setTimeout(()=>{if(u.current){let e=u.current.querySelector("table");if(e){let t=U+2,a=e.querySelector("thead tr:last-child th:nth-child(".concat(t+1,")"));if(a){let e=a.offsetLeft,t=a.offsetWidth,r=u.current.offsetWidth;u.current.scrollLeft=Math.max(0,e-r/2+t/2),p.current=!0}}}},200);return()=>clearTimeout(e)}},[U,e,g.length]),(0,s.useEffect)(()=>{T>0&&(t("employee"),c("overtime"))},[T]),(0,s.useEffect)(()=>{_>0&&(t("employee"),c("utilization"))},[_]);let z=(0,s.useMemo)(()=>{let e=[],t=-1,a=-1,r=0,s=0;return W.forEach((l,n)=>{let d=(0,M.t)(l),o=(0,C.C)(l);d!==t||o!==a?(r>0&&e.push({month:(0,m.GP)(W[s],"MMMM"),year:a,count:r,startIndex:s}),t=d,a=o,r=1,s=n):r++}),r>0&&e.push({month:(0,m.GP)(W[s],"MMMM"),year:a,count:r,startIndex:s}),e},[W]);(0,s.useMemo)(()=>{if(f.length>0){let e=f.map(e=>e.week);W.map((e,t)=>({week:G(e),index:t})).filter(t=>e.includes(t.week)).length}},[f,W]);let q=(e,t)=>{let a,r,s=(0,D.$)(e,{weekStartsOn:1});if(t.startDate instanceof Date){let e=t.startDate.getHours();19===e||18===e?((a=new Date(t.startDate)).setHours(a.getHours()+(24-e)),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)):a=t.startDate}else{let e=String(t.startDate);if(e.match(/^\d{4}-\d{2}-\d{2}$/)){let[t,r,s]=e.split("-").map(Number);a=new Date(t,r-1,s)}else a=new Date(t.startDate)}if(t.endDate instanceof Date){let e=t.endDate.getHours();19===e||18===e?((r=new Date(t.endDate)).setHours(r.getHours()+(24-e)),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):r=t.endDate}else{let e=String(t.endDate);if(e.match(/^\d{4}-\d{2}-\d{2}$/)){let[t,a,s]=e.split("-").map(Number);r=new Date(t,a-1,s)}else r=new Date(t.endDate)}let l=(0,m.GP)(e,"yyyy-MM-dd"),n=a.getDay();if(("2025-08-25"===l||"2025-09-01"===l)&&(console.log("\uD83D\uDD0D Checking week ".concat(l,' for project "').concat(t.name,'":')),console.log("  Raw project.startDate:",t.startDate,"(type: ".concat(typeof t.startDate,")")),console.log("  Raw project.endDate:",t.endDate,"(type: ".concat(typeof t.endDate,")")),console.log("  Parsed projectStart:",(0,m.GP)(a,"yyyy-MM-dd EEEE"),"(".concat(a.toISOString(),")")),console.log("  Parsed projectEnd:",(0,m.GP)(r,"yyyy-MM-dd")),console.log("  Project starts on:",["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][n]),console.log("  Week date:",(0,m.GP)(e,"yyyy-MM-dd EEEE")),console.log("  Week end:",(0,m.GP)(s,"yyyy-MM-dd EEEE"))),1===n){let t=e>=a&&e<=r;return("2025-08-25"===l||"2025-09-01"===l)&&(console.log("  Monday start logic: weekDate >= projectStart?",e>=a),console.log("  weekDate time:",e.getTime()),console.log("  projectStart time:",a.getTime()),console.log("  Result:",t,t?"✅ EDITABLE":"❌ NOT EDITABLE")),t}let d=s>=a&&e<=r;return("2025-08-25"===l||"2025-09-01"===l)&&(console.log("  Non-Monday logic: weekEnd >= projectStart?",s>=a),console.log("  weekDate <= projectEnd?",e<=r),console.log("  Result:",d,d?"✅ EDITABLE":"❌ NOT EDITABLE")),d},F=e=>{l(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},B=(0,s.useMemo)(()=>{if("All Teams"===b)return{employees:g,projects:h,assignments:f};let e=g.filter(e=>e.team===b),t=new Set(e.map(e=>e.id)),a=new Set;f.forEach(e=>{let r=g.find(t=>t.id===e.employeeId||t.name===e.employeeId);if(r&&t.has(r.id)){a.add(e.projectId);let t=h.find(t=>t.id===e.projectId||t.name===e.projectId);t&&a.add(t.id)}});let r=h.filter(e=>a.has(e.id)||a.has(e.name)),s=new Set(r.map(e=>e.id)),l=new Set(r.map(e=>e.name));return{employees:e,projects:r,assignments:f.filter(e=>s.has(e.projectId)||l.has(e.projectId))}},[g,h,f,b]),$=(e,t,a)=>{let r=L(a),s=G(a),l=B.employees.find(t=>t.id===e),n=B.projects.find(e=>e.id===t);return B.assignments.find(a=>{let d=a.employeeId===e||a.employeeId===(null==l?void 0:l.name)||l&&a.employeeId===l.name,o=a.projectId===t||a.projectId===(null==n?void 0:n.name)||n&&a.projectId===n.name,i=a.date===r,c=a.week===s,m=i||!a.date&&c;return d&&o&&m})},Y=(e,t,a,r)=>{let s=B.projects.find(e=>e.id===t);if(s)for(let l=a+1;l<W.length;l++){let a=W[l];q(a,s)&&J(e,t,a,r)}},J=(e,t,a,r)=>{let s=$(e,t,a),l=L(a),n=G(a),d=B.employees.find(t=>t.id===e),o=B.projects.find(e=>e.id===t);if(s)0===r?H(s.id):O(s.id,{hours:r,date:l});else if(r>0){let a=B.assignments[0],s=a&&(a.employeeId===(null==d?void 0:d.name)||a.projectId===(null==o?void 0:o.name));R({id:(0,E.$C)(),employeeId:s&&(null==d?void 0:d.name)||e,projectId:s&&(null==o?void 0:o.name)||t,week:n,date:l,hours:r})}},Z=(0,s.useCallback)((e,t)=>{let a=B.employees.find(t=>t.id===e),r=L(t),s=G(t);return B.assignments.filter(t=>{let l=t.employeeId===e||t.employeeId===(null==a?void 0:a.name),n=t.date===r||!t.date&&t.week===s;return l&&n}).reduce((e,t)=>e+t.hours,0)},[B.employees,B.assignments]),Q=(0,s.useCallback)(e=>{let t=B.employees.find(t=>t.id===e);if(!t)return 0;let a=0;return W.forEach(r=>{let s=Z(e,r);s>t.maxHours&&(a+=s-t.maxHours)}),a},[B.employees,W,Z]),V=(0,s.useCallback)(e=>{let t=B.employees.find(t=>t.id===e);if(!t)return 0;let a=0;W.forEach(t=>{a+=Z(e,t)});let r=t.maxHours*W.length;return r>0?a/r*100:0},[B.employees,W,Z]),K=(0,s.useMemo)(()=>{let e=[...B.employees.map(e=>({...e,overtimeHours:Q(e.id),utilization:V(e.id)}))];return"utilization"===i?e=e.sort((e,t)=>e.utilization-t.utilization):"overtime"===i&&(e=e.sort((e,t)=>t.overtimeHours-e.overtimeHours)),e},[B.employees,i,Q,V]);return 0===B.employees.length||0===B.projects.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full mb-4 shadow-inner",children:(0,r.jsx)(N.A,{className:"w-8 h-8 text-gray-500"})}),(0,r.jsx)("h3",{className:"text-subheading mb-2",children:"No Data Available"}),(0,r.jsx)("p",{className:"text-caption mb-6 max-w-md mx-auto",children:"Upload an Excel file with employee and project data to start tracking hours."}),(0,r.jsx)("button",{className:"btn-primary",children:"Get Started"})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)(A,{viewMode:e,onViewModeChange:e=>{t(e),p.current=!1}}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,m.GP)(W[0],"MMM yyyy")," - ",(0,m.GP)(W[W.length-1],"MMM yyyy")," (",W.length," weeks)"]})]}),"employee"===e?(0,r.jsx)("div",{className:"overflow-x-auto",ref:u,children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsxs)("thead",{children:[(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"text-left p-2 border border-gray-200 font-semibold sticky left-0 bg-gray-100 z-10",rowSpan:2,children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:"Employee"}),"overtime"===i&&(0,r.jsx)("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded",children:"↓ Overtime"}),"utilization"===i&&(0,r.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"↑ Utilization"})]})}),(0,r.jsx)("th",{className:"text-left p-2 border border-gray-200 font-semibold",rowSpan:2,children:"Team"}),z.map((e,t)=>(0,r.jsxs)("th",{colSpan:e.count,className:"text-center p-1 border border-gray-200 font-semibold bg-gray-100 text-sm",children:[e.month," ",e.year]},t)),(0,r.jsx)("th",{className:"text-center p-2 border border-gray-200 font-semibold bg-blue-50",rowSpan:2,children:"Total"})]}),(0,r.jsx)("tr",{className:"bg-gray-50",children:W.map((e,t)=>{let a=t===U;return(0,r.jsx)("th",{className:"text-center p-1 border border-gray-200 font-normal min-w-[50px] ".concat(a?"bg-blue-100 border-blue-300":""),children:(0,r.jsx)("div",{className:"text-xs ".concat(a?"font-semibold text-blue-700":""),children:(0,m.GP)(e,"d")})},e.toISOString())})})]}),(0,r.jsx)("tbody",{children:K.map(e=>{let t=B.assignments.filter(t=>t.employeeId===e.id||t.employeeId===e.name).reduce((e,t)=>e+t.hours,0),l=a.has(e.id),d=B.projects.filter(t=>B.assignments.some(a=>(a.employeeId===e.id||a.employeeId===e.name)&&(a.projectId===t.id||a.projectId===t.name)));return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("tr",{className:"hover:bg-gray-50 font-medium group",children:[(0,r.jsx)("td",{className:"p-3 border border-gray-200 sticky left-0 bg-white",children:(0,r.jsxs)("button",{onClick:()=>F(e.id),className:"flex items-center gap-2 w-full text-left hover:text-blue-600",children:[d.length>0&&(l?(0,r.jsx)(y.A,{className:"w-4 h-4"}):(0,r.jsx)(j.A,{className:"w-4 h-4"})),0===d.length&&(0,r.jsx)("span",{className:"w-4"}),e.name,d.length>0&&(0,r.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",d.length," projects)"]})]})}),(0,r.jsx)("td",{className:"p-3 border border-gray-200 text-sm text-gray-600",children:e.team}),W.map((t,a)=>{let s=Z(e.id,t),l=s>e.maxHours,n=a===U;return(0,r.jsx)("td",{className:"p-2 border border-gray-200 text-center ".concat(n?"border-blue-300":""," ").concat(l?"bg-red-50":s>0?"bg-green-50":n?"bg-blue-50":""),children:(0,r.jsx)("div",{className:"font-semibold ".concat(l?"text-red-600":""),children:s||"-"})},t.toISOString())}),(0,r.jsx)("td",{className:"p-3 border border-gray-200 text-center font-semibold bg-blue-50",children:t})]}),l&&d.map(t=>{let a=B.assignments.filter(a=>(a.employeeId===e.id||a.employeeId===e.name)&&(a.projectId===t.id||a.projectId===t.name));return(0,r.jsxs)("tr",{className:"bg-gray-50",children:[(0,r.jsx)("td",{className:"pl-12 p-2 border border-gray-200 sticky left-0 bg-gray-50 text-gray-600 text-sm",children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"↳"}),t.name]})}),(0,r.jsx)("td",{className:"p-2 border border-gray-200"}),W.map((a,s)=>{let l=$(e.id,t.id,a),n=q(a,t),d=(null==l?void 0:l.hours)||0,o=W.slice(s+1).some(e=>q(e,t));return(0,r.jsx)("td",{className:"p-1 border border-gray-200 text-center group ".concat(n?"bg-white":"bg-gray-50"),children:n?(0,r.jsxs)("div",{className:"flex items-center gap-0.5 justify-center",children:[(0,r.jsx)("input",{type:"number",min:"0",max:"168",value:(null==l?void 0:l.hours)||"",onChange:r=>{let s=parseInt(r.target.value)||0;J(e.id,t.id,a,s)},placeholder:"-",className:"w-12 px-1 py-0.5 text-center border border-gray-300 rounded-l text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 peer"}),o&&(0,r.jsx)("button",{onClick:()=>Y(e.id,t.id,s,d),className:"p-0.5 border border-l-0 border-gray-300 rounded-r bg-gray-50 hover:bg-blue-100 transition-all duration-200 opacity-0 group-hover:opacity-100 peer-focus:opacity-100 -ml-0.5",title:"Copy value to all weeks to the right",children:(0,r.jsx)(w.A,{className:"w-3 h-3 text-gray-600"})})]}):(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})},a.toISOString())}),(0,r.jsx)("td",{className:"p-2 border border-gray-200 text-center text-sm text-gray-600",children:a.reduce((e,t)=>e+t.hours,0)})]},"".concat(e.id,"-").concat(t.id))}),l&&(0,r.jsxs)("tr",{className:"bg-blue-50",children:[(0,r.jsx)("td",{className:"pl-12 p-2 border border-gray-200 sticky left-0 bg-blue-50 text-sm",children:n===e.id?(0,r.jsxs)("select",{className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",onChange:t=>{if(t.target.value){let r=t.target.value,s=B.projects.find(e=>e.id===r);if(s){let t=W.filter(e=>q(e,s));if(t.length>0){let a=t[0],l=L(a),n=G(a),d=B.assignments[0],o=d&&(d.employeeId===(null==e?void 0:e.name)||d.projectId===(null==s?void 0:s.name));R({id:(0,E.$C)(),employeeId:o&&(null==e?void 0:e.name)||e.id,projectId:o&&(null==s?void 0:s.name)||r,week:n,date:l,hours:0})}}o(null),a.has(e.id)||F(e.id)}},onBlur:()=>o(null),autoFocus:!0,children:[(0,r.jsx)("option",{value:"",children:"Select a project..."}),B.projects.filter(e=>!d.some(t=>t.id===e.id)).map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}):(0,r.jsxs)("button",{onClick:()=>o(e.id),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 hover:bg-blue-100 px-2 py-1 rounded transition-colors",children:[(0,r.jsx)(x.A,{className:"w-4 h-4"}),"Add Project"]})}),(0,r.jsx)("td",{className:"p-2 border border-gray-200",colSpan:W.length+2})]})]},e.id)})})]})}):(0,r.jsx)("div",{className:"overflow-x-auto",ref:u,children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsxs)("thead",{children:[(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"text-left p-2 border border-gray-200 font-semibold sticky left-0 bg-gray-100 z-10",rowSpan:2,children:"Project"}),z.map((e,t)=>(0,r.jsxs)("th",{colSpan:e.count,className:"text-center p-1 border border-gray-200 font-semibold bg-gray-100 text-sm",children:[e.month," ",e.year]},t)),(0,r.jsx)("th",{className:"text-center p-2 border border-gray-200 font-semibold bg-blue-50",rowSpan:2,children:"Total"})]}),(0,r.jsx)("tr",{className:"bg-gray-50",children:W.map((e,t)=>{let a=t===U;return(0,r.jsx)("th",{className:"text-center p-1 border border-gray-200 font-normal min-w-[50px] ".concat(a?"bg-blue-100 border-blue-300":""),children:(0,r.jsx)("div",{className:"text-xs ".concat(a?"font-semibold text-blue-700":""),children:(0,m.GP)(e,"d")})},e.toISOString())})})]}),(0,r.jsx)("tbody",{children:B.projects.map(e=>{let t=B.assignments.filter(t=>t.projectId===e.id||t.projectId===e.name).reduce((e,t)=>e+t.hours,0),l=a.has(e.id),d=B.employees.filter(t=>B.assignments.some(a=>(a.employeeId===t.id||a.employeeId===t.name)&&(a.projectId===e.id||a.projectId===e.name))),i=new Set;B.assignments.forEach(t=>{t.employeeId&&t.employeeId.startsWith("Placeholder")&&(t.projectId===e.id||t.projectId===e.name)&&i.add(t.employeeId)});let c=[...d,...Array.from(i).map(e=>({id:e.toLowerCase().replace(" ","_"),name:e,team:"Unassigned",maxHours:40,skills:{}}))];return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("tr",{className:"hover:bg-gray-50 font-medium group",children:[(0,r.jsx)("td",{className:"p-3 border border-gray-200 sticky left-0 bg-white",children:(0,r.jsxs)("button",{onClick:()=>F(e.id),className:"flex items-center gap-2 w-full text-left hover:text-blue-600",children:[c.length>0&&(l?(0,r.jsx)(y.A,{className:"w-4 h-4"}):(0,r.jsx)(j.A,{className:"w-4 h-4"})),0===c.length&&(0,r.jsx)("span",{className:"w-4"}),e.name,c.length>0&&(0,r.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",c.length," people)"]})]})}),W.map((t,a)=>{let s=((e,t)=>{let a=B.projects.find(t=>t.id===e),r=L(t),s=G(t);return B.assignments.filter(t=>{let l=t.projectId===e||t.projectId===(null==a?void 0:a.name),n=t.date===r||!t.date&&t.week===s;return l&&n}).reduce((e,t)=>e+t.hours,0)})(e.id,t),l=a===U;return(0,r.jsx)("td",{className:"p-2 border border-gray-200 text-center ".concat(l?"border-blue-300":""," ").concat(s>0?"bg-blue-50":l?"bg-blue-100":""),children:(0,r.jsx)("div",{className:"font-semibold",children:s||"-"})},t.toISOString())}),(0,r.jsx)("td",{className:"p-3 border border-gray-200 text-center font-semibold bg-blue-50",children:t})]}),l&&c.map(t=>{let a=t.id.startsWith("placeholder_")?B.assignments.filter(a=>a.employeeId===t.name&&(a.projectId===e.id||a.projectId===e.name)):B.assignments.filter(a=>(a.employeeId===t.id||a.employeeId===t.name)&&(a.projectId===e.id||a.projectId===e.name));return(0,r.jsxs)("tr",{className:"bg-gray-50",children:[(0,r.jsx)("td",{className:"pl-12 p-2 border border-gray-200 sticky left-0 bg-gray-50 text-gray-600 text-sm",children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-gray-400",children:"↳"}),t.name,(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["(",t.team,")"]})]})}),W.map((a,s)=>{let l=t.id.startsWith("placeholder_")?B.assignments.find(r=>r.employeeId===t.name&&(r.projectId===e.id||r.projectId===e.name)&&(r.date===L(a)||!r.date&&r.week===G(a))):$(t.id,e.id,a),n=q(a,e),d=(null==l?void 0:l.hours)||0,o=W.slice(s+1).some(t=>q(t,e));return(0,r.jsx)("td",{className:"p-1 border border-gray-200 text-center group ".concat(n?"bg-white":"bg-gray-50"),children:n?(0,r.jsxs)("div",{className:"flex items-center gap-0.5 justify-center",children:[(0,r.jsx)("input",{type:"number",min:"0",max:"168",value:(null==l?void 0:l.hours)||"",onChange:r=>{let s=parseInt(r.target.value)||0;t.id.startsWith("placeholder_")?l?0===s?H(l.id):O(l.id,{hours:s,date:L(a)}):s>0&&R({id:(0,E.$C)(),employeeId:t.name,projectId:e.id,week:G(a),date:L(a),hours:s}):J(t.id,e.id,a,s)},placeholder:"-",className:"w-12 px-1 py-0.5 text-center border border-gray-300 rounded-l text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 peer"}),o&&(0,r.jsx)("button",{onClick:()=>{if(t.id.startsWith("placeholder_"))for(let a=s+1;a<W.length;a++){let r=W[a];if(q(r,e)){let a=L(r),s=G(r),l=B.assignments.find(r=>r.employeeId===t.name&&(r.projectId===e.id||r.projectId===e.name)&&(r.date===a||!r.date&&r.week===s));l?0===d?H(l.id):O(l.id,{hours:d,date:a}):d>0&&R({id:(0,E.$C)(),employeeId:t.name,projectId:e.id,week:s,date:a,hours:d})}}else Y(t.id,e.id,s,d)},className:"p-0.5 border border-l-0 border-gray-300 rounded-r bg-gray-50 hover:bg-blue-100 transition-all duration-200 opacity-0 group-hover:opacity-100 peer-focus:opacity-100 -ml-0.5",title:"Copy value to all weeks to the right",children:(0,r.jsx)(w.A,{className:"w-3 h-3 text-gray-600"})})]}):(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})},a.toISOString())}),(0,r.jsx)("td",{className:"p-2 border border-gray-200 text-center text-sm text-gray-600",children:a.reduce((e,t)=>e+t.hours,0)})]},"".concat(e.id,"-").concat(t.id))}),l&&(0,r.jsxs)("tr",{className:"bg-blue-50",children:[(0,r.jsx)("td",{className:"pl-12 p-2 border border-gray-200 sticky left-0 bg-blue-50 text-sm",children:n===e.id?(0,r.jsxs)("select",{className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",onChange:t=>{if(t.target.value){let r=t.target.value;if("placeholder"===r){let t=Array.from(new Set(B.assignments.filter(t=>t.employeeId&&t.employeeId.startsWith("Placeholder")&&(t.projectId===e.id||t.projectId===e.name)).map(e=>e.employeeId))).filter(e=>e.startsWith("Placeholder ")).map(e=>{let t=e.match(/Placeholder (\d+)/);return t?parseInt(t[1]):0}),a=t.length>0?Math.max(...t)+1:1,r=W.filter(t=>q(t,e));if(r.length>0){let t=r[0],s=L(t),l=G(t);R({id:(0,E.$C)(),employeeId:"Placeholder ".concat(a),projectId:e.id,week:l,date:s,hours:0})}}else{let t=B.employees.find(e=>e.id===r),a=W.filter(t=>q(t,e));if(a.length>0){let s=a[0],l=L(s),n=G(s),d=B.assignments[0],o=d&&(d.employeeId===(null==t?void 0:t.name)||d.projectId===(null==e?void 0:e.name));R({id:(0,E.$C)(),employeeId:o&&(null==t?void 0:t.name)||r,projectId:o&&(null==e?void 0:e.name)||e.id,week:n,date:l,hours:0})}}o(null),a.has(e.id)||F(e.id)}},onBlur:()=>o(null),autoFocus:!0,children:[(0,r.jsx)("option",{value:"",children:"Select an employee..."}),(0,r.jsx)("option",{value:"placeholder",className:"font-semibold text-blue-600",children:"Placeholder (for optimization)"}),(0,r.jsx)("optgroup",{label:"Available Employees",children:B.employees.filter(e=>!d.some(t=>t.id===e.id)).map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.team,")"]},e.id))})]}):(0,r.jsxs)("button",{onClick:()=>o(e.id),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 hover:bg-blue-100 px-2 py-1 rounded transition-colors",children:[(0,r.jsx)(x.A,{className:"w-4 h-4"}),"Add Employee"]})}),(0,r.jsx)("td",{className:"p-2 border border-gray-200",colSpan:W.length+1})]})]},e.id)})})]})})]})}var _=a(9037),O=a(7924);let R={Expert:"bg-green-100 text-green-800",Intermediate:"bg-blue-100 text-blue-800",Beginner:"bg-yellow-100 text-yellow-800",None:"bg-gray-100 text-gray-400"};function H(){let e=(0,d.M)(e=>e.employees),t=(0,d.M)(e=>e.projects),a=(0,d.M)(e=>e.assignments),l=(0,d.M)(e=>e.skills),o=(0,d.M)(e=>e.selectedTeam),i=(0,d.M)(e=>e.updateEmployee),[c,m]=(0,s.useState)(""),[u,x]=(0,s.useState)(null),[p,g]=(0,s.useState)(null),h=(0,s.useMemo)(()=>{let r="All Teams"===o?e:e.filter(e=>e.team===o);if(p){let s=t.find(e=>e.id===p),l=new Set(a.filter(e=>e.projectId===p||e.projectId===(null==s?void 0:s.name)).map(t=>{let a=e.find(e=>e.id===t.employeeId||e.name===t.employeeId);return(null==a?void 0:a.id)||t.employeeId}));r=r.filter(e=>l.has(e.id))}return c&&(r=r.filter(e=>{var t;return e.name.toLowerCase().includes(c.toLowerCase())||(null==(t=e.email)?void 0:t.toLowerCase().includes(c.toLowerCase()))})),u&&(r=r.filter(e=>e.skills[u])),r},[e,t,a,o,p,c,u]);return 0===e.length||0===l.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-100 to-purple-200 rounded-full mb-4 shadow-inner",children:(0,r.jsx)(_.A,{className:"w-8 h-8 text-purple-500"})}),(0,r.jsx)("h3",{className:"text-subheading mb-2",children:"No Skills Data"}),(0,r.jsx)("p",{className:"text-caption mb-6 max-w-md mx-auto",children:"Upload an Excel file or load sample data to start tracking employee skills and competencies."}),(0,r.jsx)("button",{className:"btn-primary",children:"Get Started"})]}):(0,r.jsxs)("div",{className:"jsx-fde4e7975d88e1c2",children:[(0,r.jsx)(n(),{id:"fde4e7975d88e1c2",children:".skills-table-container.jsx-fde4e7975d88e1c2::-webkit-scrollbar{height:8px}.skills-table-container.jsx-fde4e7975d88e1c2::-webkit-scrollbar-track{background:#f3f4f6;border-radius:4px}.skills-table-container.jsx-fde4e7975d88e1c2::-webkit-scrollbar-thumb{background:#9ca3af;border-radius:4px}.skills-table-container.jsx-fde4e7975d88e1c2::-webkit-scrollbar-thumb:hover{background:#6b7280}"}),(0,r.jsxs)("div",{className:"jsx-fde4e7975d88e1c2 flex gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"jsx-fde4e7975d88e1c2 flex-1 relative",children:[(0,r.jsx)(O.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Search employees...",value:c,onChange:e=>m(e.target.value),className:"jsx-fde4e7975d88e1c2 input-base pl-10"})]}),(0,r.jsxs)("select",{value:p||"",onChange:e=>g(e.target.value||null),className:"jsx-fde4e7975d88e1c2 input-base",children:[(0,r.jsx)("option",{value:"",className:"jsx-fde4e7975d88e1c2",children:"All Projects"}),t.map(e=>(0,r.jsx)("option",{value:e.id,className:"jsx-fde4e7975d88e1c2",children:e.name},e.id))]}),(0,r.jsxs)("select",{value:u||"",onChange:e=>x(e.target.value||null),className:"jsx-fde4e7975d88e1c2 input-base",children:[(0,r.jsx)("option",{value:"",className:"jsx-fde4e7975d88e1c2",children:"All Skills"}),l.map(e=>(0,r.jsx)("option",{value:e,className:"jsx-fde4e7975d88e1c2",children:e},e))]})]}),(0,r.jsx)("div",{style:{maxWidth:"100%",scrollbarWidth:"thin",scrollbarColor:"#9ca3af #f3f4f6"},className:"jsx-fde4e7975d88e1c2 skills-table-container overflow-x-auto overflow-y-visible border rounded-lg shadow-sm",children:(0,r.jsxs)("table",{style:{minWidth:"max-content"},className:"jsx-fde4e7975d88e1c2 border-collapse",children:[(0,r.jsx)("thead",{className:"jsx-fde4e7975d88e1c2",children:(0,r.jsxs)("tr",{className:"jsx-fde4e7975d88e1c2 bg-gray-50",children:[(0,r.jsx)("th",{className:"jsx-fde4e7975d88e1c2 text-left p-3 border border-gray-200 font-semibold sticky left-0 bg-gray-50 z-10",children:"Employee"}),(0,r.jsx)("th",{className:"jsx-fde4e7975d88e1c2 text-left p-3 border border-gray-200 font-semibold",children:"Team"}),(0,r.jsx)("th",{className:"jsx-fde4e7975d88e1c2 text-left p-3 border border-gray-200 font-semibold",children:"Max Hours"}),l.map(e=>(0,r.jsx)("th",{className:"jsx-fde4e7975d88e1c2 text-center p-3 border border-gray-200 font-semibold min-w-[120px]",children:e},e))]})}),(0,r.jsxs)("tbody",{className:"jsx-fde4e7975d88e1c2",children:[h.map(t=>(0,r.jsxs)("tr",{className:"jsx-fde4e7975d88e1c2 hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"jsx-fde4e7975d88e1c2 p-3 border border-gray-200 font-medium sticky left-0 bg-white",children:(0,r.jsxs)("div",{className:"jsx-fde4e7975d88e1c2",children:[(0,r.jsx)("div",{className:"jsx-fde4e7975d88e1c2",children:t.name}),t.email&&(0,r.jsx)("div",{className:"jsx-fde4e7975d88e1c2 text-xs text-gray-500",children:t.email})]})}),(0,r.jsx)("td",{className:"jsx-fde4e7975d88e1c2 p-3 border border-gray-200",children:(0,r.jsx)("input",{type:"text",value:t.team||"",onChange:e=>i(t.id,{team:e.target.value}),className:"jsx-fde4e7975d88e1c2 w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,r.jsx)("td",{className:"jsx-fde4e7975d88e1c2 p-3 border border-gray-200",children:(0,r.jsx)("input",{type:"number",value:t.maxHours,onChange:e=>i(t.id,{maxHours:parseInt(e.target.value)||0}),min:"0",max:"168",className:"jsx-fde4e7975d88e1c2 w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})}),l.map(a=>{let s=t.skills[a]||"None";return(0,r.jsx)("td",{className:"jsx-fde4e7975d88e1c2 p-3 border border-gray-200 text-center",children:(0,r.jsxs)("select",{value:s,onChange:r=>((t,a,r)=>{let s=e.find(e=>e.id===t);if(!s)return;let l={...s.skills};"None"===r?delete l[a]:l[a]=r,i(t,{skills:l})})(t.id,a,r.target.value),className:"jsx-fde4e7975d88e1c2 "+"px-3 py-1 rounded-full text-xs font-medium ".concat(R[s]," cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500"),children:[(0,r.jsx)("option",{value:"None",className:"jsx-fde4e7975d88e1c2",children:"None"}),(0,r.jsx)("option",{value:"Beginner",className:"jsx-fde4e7975d88e1c2",children:"Beginner"}),(0,r.jsx)("option",{value:"Intermediate",className:"jsx-fde4e7975d88e1c2",children:"Intermediate"}),(0,r.jsx)("option",{value:"Expert",className:"jsx-fde4e7975d88e1c2",children:"Expert"})]})},a)})]},t.id)),(0,r.jsxs)("tr",{className:"jsx-fde4e7975d88e1c2 bg-gray-100 font-semibold",children:[(0,r.jsx)("td",{className:"jsx-fde4e7975d88e1c2 p-3 border border-gray-200 sticky left-0 bg-gray-100",children:"Totals"}),(0,r.jsx)("td",{className:"jsx-fde4e7975d88e1c2 p-3 border border-gray-200"}),(0,r.jsx)("td",{className:"jsx-fde4e7975d88e1c2 p-3 border border-gray-200 text-center",children:(0,r.jsx)("div",{className:"jsx-fde4e7975d88e1c2 text-sm font-semibold",children:h.reduce((e,t)=>e+t.maxHours,0)})}),l.map(e=>{let t=h.filter(t=>"Expert"===t.skills[e]).length,a=h.filter(t=>"Intermediate"===t.skills[e]).length,s=h.filter(t=>"Beginner"===t.skills[e]).length,l=t+a+s;return(0,r.jsx)("td",{className:"jsx-fde4e7975d88e1c2 p-3 border border-gray-200 text-center text-sm",children:l>0?(0,r.jsxs)("div",{className:"jsx-fde4e7975d88e1c2 space-y-1",children:[(0,r.jsxs)("div",{className:"jsx-fde4e7975d88e1c2 text-xs text-gray-600",children:[t>0&&(0,r.jsxs)("span",{className:"jsx-fde4e7975d88e1c2 text-green-700",children:[t,"E"]}),t>0&&a>0&&(0,r.jsx)("span",{className:"jsx-fde4e7975d88e1c2 text-gray-400",children:" / "}),a>0&&(0,r.jsxs)("span",{className:"jsx-fde4e7975d88e1c2 text-blue-700",children:[a,"I"]}),(t>0||a>0)&&s>0&&(0,r.jsx)("span",{className:"jsx-fde4e7975d88e1c2 text-gray-400",children:" / "}),s>0&&(0,r.jsxs)("span",{className:"jsx-fde4e7975d88e1c2 text-yellow-700",children:[s,"B"]})]}),(0,r.jsx)("div",{className:"jsx-fde4e7975d88e1c2 font-bold text-gray-900",children:l})]}):(0,r.jsx)("span",{className:"jsx-fde4e7975d88e1c2 text-gray-400",children:"-"})},e)})]})]})]})})]})}function G(){let{employees:e,projects:t,assignments:a}=(0,d.M)(),{projectSkillMatrix:l,allSkills:n}=(0,s.useMemo)(()=>{let r=new Map;e.forEach(e=>{r.set(e.id,e),r.set(e.name,e)});let s=new Set;e.forEach(e=>{Object.keys(e.skills||{}).forEach(e=>{s.add(e)})});let l=Array.from(s).sort(),n=new Map,d=new Set;return a.forEach(e=>{let a=r.get(e.employeeId)||r.get(e.employeeId),s=t.find(t=>t.id===e.projectId);if(!a||!s)return;let l="".concat(a.id,"-").concat(s.id);if(d.has(l))return;d.add(l),n.has(s.id)||n.set(s.id,new Map);let o=n.get(s.id);s.requiredSkills&&s.requiredSkills.length>0&&s.requiredSkills.forEach(e=>{var t;let r=null==(t=a.skills)?void 0:t[e];if(r){let t=o.get(e)||0;o.set(e,t+("Expert"===r?3:"Intermediate"===r?2:+("Beginner"===r)))}else o.has(e)||o.set(e,0)})}),{projectSkillMatrix:n,allSkills:l}},[e,t,a]);return 0===t.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-gray-500",children:"No Projects Yet"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Import an Excel file to see project skill requirements"})]})}):0===n.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-gray-500",children:"No Skills Data Available"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Import employee skills data to see the matrix"})]})}):(0,r.jsx)("div",{className:"h-full overflow-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-10",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),n.map(e=>(0,r.jsx)("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:e},e)),(0,r.jsx)("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>{let t=l.get(e.id),a=new Set(e.requiredSkills||[]),s=t?Array.from(t.entries()).filter(e=>{let[t]=e;return a.has(t)}).reduce((e,t)=>{let[,a]=t;return e+a},0):0;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),n.map(e=>{let s=null==t?void 0:t.get(e),l=a.has(e),n=l?0===s?"0 ⚠":(null==s?void 0:s.toString())||"0 ⚠":"-";return(0,r.jsx)("td",{className:"px-4 py-2 text-center text-sm ".concat(l?0===s?"text-red-600 font-medium":"text-gray-900":"text-gray-400"),children:n},e)}),(0,r.jsx)("td",{className:"px-4 py-2 text-center text-sm font-medium text-gray-900",children:s})]},e.id)})})]})})}function L(){let[e,t]=(0,s.useState)("employee");return(0,s.useEffect)(()=>{let e=()=>{"project"===new URLSearchParams(window.location.hash.slice(1)).get("subview")?t("project"):t("employee")};return e(),window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(A,{viewMode:e,onViewModeChange:e=>{t(e);let a=new URLSearchParams(window.location.hash.slice(1));a.set("subview",e),window.location.hash=a.toString()}})}),(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:"employee"===e?(0,r.jsx)(H,{}):(0,r.jsx)(G,{})})]})}function W(){let[e,t]=(0,s.useState)("gantt");return(0,s.useEffect)(()=>{let e=()=>{t(new URLSearchParams(window.location.hash.slice(1)).get("view")||"gantt")};return e(),window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]),(0,r.jsxs)("div",{className:"card animate-fade-in",children:["gantt"===e&&(0,r.jsx)(b,{}),"hours"===e&&(0,r.jsx)(T,{}),"skills"===e&&(0,r.jsx)(L,{})]})}}},e=>{e.O(0,[258,121,358],()=>e(e.s=1569)),_N_E=e.O()}]);